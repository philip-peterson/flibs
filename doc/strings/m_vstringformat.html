
<html><head>
<title>flibs/m_vstringformat - flibs</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file 'strings/m_vstringformat.man' by tcllib/doctools with format 'html'
   -->
<! -- Copyright &copy; 2008 Michael Baudin michael.baudin@gmail.com
   -->
<! -- CVS: $Id: m_vstringformat.html,v 1.2 2013/05/13 08:03:20 knystrom Exp $ flibs/m_vstringformat.n
   -->
<body><div class="doctools">
<h1 class="title">flibs/m_vstringformat(n) 1.0  &quot;flibs&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>flibs/m_vstringformat - Formatting dynamic strings</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">OVERVIEW</a>
<ul>
<li class="subsection"><a href="#subsection1">Formatting logical values</a></li>
<li class="subsection"><a href="#subsection2">Formatting integer values</a></li>
<li class="subsection"><a href="#subsection3">Limitations</a></li>
<li class="subsection"><a href="#subsection4">Planned features</a></li>
</ul>
</li>
<li class="section"><a href="#section3">METHODS</a></li>
<li class="section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="syntax">
<li><a href="#1"><b class="method">vstring_format</b> <i class="arg">value</i> <span class="opt">?fmt?</span></a></li>
<li><a href="#2"><b class="method">vstring_format</b> <i class="arg">logical_value</i></a></li>
<li><a href="#3"><b class="method">vstring_format</b> <i class="arg">logical_value</i> <i class="arg">fmt</i></a></li>
<li><a href="#4"><b class="method">vstring_format</b> <i class="arg">logical_value</i> <i class="arg">fmt</i></a></li>
<li><a href="#5"><b class="method">vstring_format</b> <i class="arg">integer_value</i></a></li>
<li><a href="#6"><b class="method">vstring_format</b> <i class="arg">integer_value</i> <i class="arg">fmt</i></a></li>
<li><a href="#7"><b class="method">vstring_format</b> <i class="arg">integer_value</i> <i class="arg">fmt</i></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>The module <em>m_vstringformat</em> provides services to format one string, that is to
say to convert a basic fortran data type into a dynamic vstring.
The current version of m_vstringformat can handle logical variables
and integers of all kinds. The format can be given by the client code,
or computed automatically. The format can be given as a basic character
string, or as a vstring.</p>
</div>
<div id="section2" class="section"><h2><a name="section2">OVERVIEW</a></h2>
<p>The only method provided here is vstring_format, which takes one basic 
   basic fortran data type as the first argument (and, optionnaly, a format),
   and returns a dynamic string which represents that value.</p>
<div id="subsection1" class="subsection"><h3><a name="subsection1">Formatting logical values</a></h3>
<p>One can format a logical into a vstring with automatic or explicit format.
   In the following sample, one format the &quot;.false.&quot; logical into a vstring.
   After formatting, the string &quot;mystring&quot; has a length of 1 and its content 
   is &quot;F&quot;.</p>
<pre class="example">
      logical :: mybool
      type ( t_vstring ) :: mystring
      mybool = .false.
      mystring = vstring_format ( mybool )
</pre>
<p>In the following sample, one format the &quot;.false.&quot; logical into a vstring 
   with an explicit format given as a character string :</p>
<pre class="example">
      logical :: mybool
      type ( t_vstring ) :: mystring
      mybool = .false.
      mystring = vstring_format ( mybool , &quot;(L3)&quot; )
</pre>
<p>After formatting, the string &quot;mystring&quot; has a length of 3 and its content 
   is &quot;  F&quot;.
   In the following sample, one format the &quot;.false.&quot; logical into a vstring 
   with an explicit format given as a vstring :</p>
<pre class="example">
      logical :: mybool
      type ( t_vstring ) :: mystring
      type ( t_vstring ) :: myformat
      mybool = .false.
      call vstring_new ( myformat , &quot;(L3)&quot; )
      mystring = vstring_format ( mybool , myformat )
      call vstring_free ( myformat )
</pre>
</div>
<div id="subsection2" class="subsection"><h3><a name="subsection2">Formatting integer values</a></h3>
<p>One can format an integer into a vstring, with automatic or explict format.
   The string formatting system can handle all fortran kinds of integers.
   The automatic format makes so that the resulting string has the 
   length which exactly matches the number of digits necessary to represent 
   the integer :</p>
<ul class="itemized">
<li><p>if the integer is negative, the &quot;-&quot; sign is at the begining of the string,</p></li>
<li><p>if the integer is positive, the &quot;+&quot; sign is not in the string.</p></li>
</ul>
<p>In the following example, one formats the integer 2008 into a vstring.
   After formatting, the string has a length of 4 and its content is the 
   string &quot;2008&quot;.</p>
<pre class="example">
      type ( t_vstring ) :: mystring
      mystring = vstring_format ( 2008 )
</pre>
<p>To acheive the same effect, one can use the &quot;I0&quot; format of the fortran 90
   standard :</p>
<pre class="example">
      type ( t_vstring ) :: mystring
      mystring = vstring_format ( 2008 , &quot;(I0)&quot; )
</pre>
<p>The component can handle long integers with specified kinds 1, 2, 4 or 8.
   In the following example, one automatically format a 32-bits integer 
   (1073741824 = 2**31) into a dynamic string.</p>
<pre class="example">
      integer (kind=4) :: integerkind4 = 1073741824
      mystring = vstring_format ( integerkind4 )
</pre>
<p>After formatting, the string has a length of 4 and its content is the 
   string &quot;1073741824&quot;.</p>
</div>
<div id="subsection3" class="subsection"><h3><a name="subsection3">Limitations</a></h3>
<p>The current implementation of the string formatting is based 
   on the standard &quot;write&quot; fortran statement, which takes 
   a basic character string as argument.
   Moreover the format given to the string formatting command 
   is not analysed at all, so that the length of the resulting 
   string is not computed.
   The current component use therefore a character string of 
   fixed length VSTRING_FORMAT_MAXIMUM_FORMAT_LENGTH.
   This leads to at least two limitations :</p>
<ul class="itemized">
<li><p>if the client code has to manage formated strings which length is over 
     VSTRING_FORMAT_MAXIMUM_FORMAT_LENGTH characters, the 
     current algorithm will generate an error at execution time.</p></li>
<li><p>the &quot;write&quot; statement has to manage a long string, even
     if the result is short, which raise performances issues.</p></li>
</ul>
<p>The current string formatting takes only one value. 
   An effective implementation would in fact take a list of
   one or more arguments, which may be of different types.
   The current implementation does not manage real values.
   The limitations of the current component are so strong that the 
   component should not be released... but is useful to format 
   integers and that is why it has been finally released.</p>
</div>
<div id="subsection4" class="subsection"><h3><a name="subsection4">Planned features</a></h3>
<p>It is expected that future releases of this component can manage 
   more basic data types, including real types of all kinds.
   Future releases may also extend the formats by taking into account
   string formatting coming from other languages than fortran (for example C), 
   including:
   - the &quot;-&quot; specification which specifies that the converted argument 
     should be left-justified in its field
   - the &quot;+&quot; specification which specifies that a number should always 
     be printed with a sign, even if positive.
   - etc...</p>
</div>
</div>
<div id="section3" class="section"><h2><a name="section3">METHODS</a></h2>
<dl class="definitions">
<dt><a name="1"><b class="method">vstring_format</b> <i class="arg">value</i> <span class="opt">?fmt?</span></a></dt>
<dd><dl class="arguments">
<dt>&lt;value type&gt;, intent(in) :: <i class="arg">value</i></dt>
<dd></dd>
<dt>&lt;fmt type&gt;, intent(in), optional :: <i class="arg">fmt</i></dt>
<dd></dd>
</dl>
<p>Generic converter from a basic fortran data type into a vstring.
Returns a new dynamic string with type t_vstring by formating the 
given <i class="arg">value</i> against the optional format <i class="arg">fmt</i>.
The <i class="arg">value</i> may be a logical or and integer of kind 1, 2, 4 or 8 to format.
If <i class="arg">fmt</i> is provided, then this format is used to compute the
new string. If format is provided, it may be either with a character(len=*) type
or with a t_vstring type.
If format is not provided, an automatic format is computed and applied
to compute the new string. With automatic format, the computed
string has a minimum length, that is, does not contain any blank and
begins with &quot;-&quot; only if the value is a strictly negative integer.</p></dd>
<dt><a name="2"><b class="method">vstring_format</b> <i class="arg">logical_value</i></a></dt>
<dd><dl class="arguments">
<dt>logical , intent(in) :: <i class="arg">logical_value</i></dt>
<dd></dd>
</dl>
<p>Returns a new vstring by formatting the logical <i class="arg">logical_value</i> 
with automatic format.</p></dd>
<dt><a name="3"><b class="method">vstring_format</b> <i class="arg">logical_value</i> <i class="arg">fmt</i></a></dt>
<dd><dl class="arguments">
<dt>logical , intent(in) :: <i class="arg">logical_value</i></dt>
<dd></dd>
<dt>character(len=*), intent(in) :: <i class="arg">fmt</i></dt>
<dd></dd>
</dl>
<p>Returns a new vstring by formatting the logical <i class="arg">logical_value</i> 
with the given character(len=*) format <i class="arg">fmt</i>.</p></dd>
<dt><a name="4"><b class="method">vstring_format</b> <i class="arg">logical_value</i> <i class="arg">fmt</i></a></dt>
<dd><dl class="arguments">
<dt>logical, intent(in) :: <i class="arg">logical_value</i></dt>
<dd></dd>
<dt>type ( t_vstring ), intent(in) :: <i class="arg">fmt</i></dt>
<dd></dd>
</dl>
<p>Returns a new vstring by formatting the logical <i class="arg">logical_value</i> 
with the given vstring format <i class="arg">fmt</i>.</p></dd>
<dt><a name="5"><b class="method">vstring_format</b> <i class="arg">integer_value</i></a></dt>
<dd><dl class="arguments">
<dt>integer (kind = INTEGER_KIND ), intent(in) :: <i class="arg">integer_value</i></dt>
<dd></dd>
</dl>
<p>Returns a new vstring by formatting the integer <i class="arg">integer_value</i> with an automatic format.
With automatic format, the computed 
string has a minimum length, that is, does not contain any blank and
begins with &quot;-&quot; only if the integer_value is a strictly negative integer.
The INTEGER_KIND kind of integer may by 1, 2, 4 or 8.</p></dd>
<dt><a name="6"><b class="method">vstring_format</b> <i class="arg">integer_value</i> <i class="arg">fmt</i></a></dt>
<dd><dl class="arguments">
<dt>integer (kind = INTEGER_KIND ), intent(in) :: <i class="arg">integer_value</i></dt>
<dd></dd>
<dt>character(len=*), intent(in) :: <i class="arg">fmt</i></dt>
<dd></dd>
</dl>
<p>Returns a new vstring by formatting the integer <i class="arg">integer_value</i>
 with the given format <i class="arg">fmt</i>.
The INTEGER_KIND kind of integer may by 1, 2, 4 or 8.</p></dd>
<dt><a name="7"><b class="method">vstring_format</b> <i class="arg">integer_value</i> <i class="arg">fmt</i></a></dt>
<dd><dl class="arguments">
<dt>integer (kind = INTEGER_KIND ), intent(in) :: <i class="arg">integer_value</i></dt>
<dd></dd>
<dt>type ( t_vstring ), intent(in) :: <i class="arg">fmt</i></dt>
<dd></dd>
</dl>
<p>Returns a new vstring by formatting the integer <i class="arg">integer_value</i>
 with the given format <i class="arg">fmt</i>.
The INTEGER_KIND kind of integer may by 1, 2, 4 or 8.</p></dd>
</dl>
</div>
<div id="copyright" class="section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; 2008 Michael Baudin michael.baudin@gmail.com</p>
</div>
</div></body></html>